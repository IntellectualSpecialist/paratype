var o={EMPTY:"\u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u043E\u043B\u0435.",EMAIL:'Email \u0434\u043E\u043B\u0436\u0435\u043D \u0431\u044B\u0442\u044C \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 "example@domen.ru".'},r=document.querySelectorAll(".form"),v=a=>{let i=a.querySelector("form"),n,t;i&&(t=a.querySelector('[name="email"]'),n=t.closest(".custom-input"));let u=e=>/^[a-zA-Zа-яёА-ЯЁ0-9._%+-]+@[a-zA-Zа-яёА-ЯЁ0-9.-]+\.(?:[рР][фФ]|[a-zA-Z0-9-]{2,})$/.test(e),l=()=>{n.classList.contains("custom-input--invalid")&&n.classList.remove("custom-input--invalid"),i.reset()},c=()=>{i.setAttribute("novalidate","true")},m=e=>{e.preventDefault();let s=t.value;if(!s){t.setCustomValidity(o.EMPTY),n.classList.add("custom-input--invalid"),t.reportValidity();return}if(u(s))t.setCustomValidity("");else{t.setCustomValidity(o.EMAIL),n.classList.add("custom-input--invalid"),t.reportValidity();return}i.submit(),l()},d=e=>{if(e.target.matches("input")&&e.target.value){let s=e.target.closest(".custom-input");s.classList.contains("custom-input--invalid")&&s.classList.remove("custom-input--invalid")}},p=()=>{i.addEventListener("submit",m),i.addEventListener("input",d)};c(),l(),p()},E=()=>{r.length&&r.forEach(a=>{v(a)})};export{E as initFormsValidate};
